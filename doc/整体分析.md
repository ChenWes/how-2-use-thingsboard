#### 环境准备

- release-3.2分支源码，可参考[编译](编译.md)获取源码
- IDE Idea或Eclipse，本文使用Idea

#### 准备

使用Idea打开源码工程。

![工程结构](../image/工程结构.png)



#### 分析

整个工程由Maven进行生命周期管理，因为工程根目录有pom.xml，打开pom.xml，核心内容有以下几段：

- modules

  ```
    <modules>
        <module>netty-mqtt</module>
        <module>common</module>
        <module>rule-engine</module>
        <module>dao</module>
        .......
    </modules>
  ```

  表明是maven的父子工程，子工程包含`netty-mqtt`、`common`、`rule-engine`、`dao`、`transport`、`ui-ngx`、`tools`、`application`、`msa`、`rest-client`

  - `netty-mqtt`：netty实现的mqtt
  - `common`：公共的，一般取这个名字的都会被其他子工程所依赖
  - `rule-engine`：规则引擎，
  - `dao`：数据存取对象，
  - `transport`：协议，包含coap、http、mqtt三种
  - `ui-ngx`：//todo
  - `tools`：//todo
  -  `application`：//todo

- Profiles
  ```
    <profiles>
        <profile>
            <id>default</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
        </profile>
        ......
    </profiles>
  ```
  表明有几种自定义环境，从id上看，包含`default`、`download-dependencies`、`packaging`
  - `default`：默认，默认处于激活状态
  - `download-dependencies`：下载依赖，指定profile激活
  - `packaging`：打包，默认处于激活状态
  
- denpendencies
  ```
    <dependencies>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>
  ```
  依赖lombok包，看到这个就明白Idea需要安装lombok插件，且因为不再`dependencyManagement`标签对中，所以默认子工程继承该依赖
  
- dependencyManagement

  //todo

- repositories

  //todo

#### 其他
除了介绍的子工程以外，从根目录中还可以看到`docker`、`img`、`k8s`三个子目录

- docker：Docker方式启动的相关脚本和配置
- img：一张logo图片
- K8s：Kubernetes方式启动的相关脚本和配置





